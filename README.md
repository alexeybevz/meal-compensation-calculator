# Расчет компенсации питания в столовой

### Описание работы программы

Программа принимает на вход два вида информации за отчетный период (месяц):

1. Данные из PercO: стоимость питания каждого сотрудника и время посещения столовой.
2. Данные из 1С: табель учета рабочего времени, в котором отражается рабочий график и смена каждого сотрудника.

На основе полученной информации программа производит расчет компенсации питания и формирует два отчета:

1. Сводный отчет: отражает общую стоимость питания и итоговую компенсацию по каждому сотруднику.
2. Отчет по несоответствиям: отражает посещения столовой, за которые компенсация питания равна нулю, а именно:

    * сотрудник по данным из PercO не найден в табеле учета рабочего времени;
    * сотрудник по данным из табеля учета рабочего времени в день посещения столовой имеет такой график и смену, по которым не удалось применить алгоритм расчета компенсации;
    * сотрудник посетил столовую вне времени действия компенсации;

### Алгоритм определения типа компенсации

    Дневная компенсация начисляется, если в день посещения столовой в графике работы сотрудника содержится одно из указанных значений (ПК, Я/ПК, Я/ПК/Г, Я/Г, Я/С, Я/ДС)
    и при этом смена <> пустому месту или график работы = 'Я' и смена <= 8

    Дневная и вечерняя компенсации начисляются, если в день посещения столовой в графике работы сотрудника содержится одно из указанных значений (Я/ВЧ, Я/Н, РВ, РВ/ВЧ, НП, РП, Я/ПК/ВЧ, Я/С/ВЧ)
    и при этом смена <> пустому месту или график работы = 'Я' и смена > 8

    Если не было выполнено ни одно из условий выше, то информация о посещении столовой попадет в отчет по несоответствиям.

### Алгоритм расчета компенсации

    Если на основе графика и смены применяется дневная коменсация, то выбираем первое посещение сотрудника в столовой в конкретный день (даже если их было несколько), 
    Расчет компенсации: стоимость заказа <= размер компенсации ? стоимость заказа : размер компенсации

    Если на основе графика и смены применяется дневная и вечерняя коменсации, то выбираем все посещения сотрудника в столовой в конкретный день, которые попадают в период действия компенсаций.
    Суммируем стоимости заказов.
    Расчет компенсации: стоимость заказа <= размер компенсации ? стоимость заказа : размер компенсации